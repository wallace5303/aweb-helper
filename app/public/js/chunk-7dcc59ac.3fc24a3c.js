(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7dcc59ac"],{"07a8":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"account-settings-info-view"},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{md:24,lg:16}},[r("a-form",{attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["uid",{initialValue:0}],expression:"['uid', { initialValue: 0 }]"}],attrs:{type:"hidden"}})],1),r("a-form-item",{attrs:{label:"用户名"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请填写用户名"},{min:4,message:"不能小于4个字符"}]}],expression:"['username', {rules:[{ required: true, message: '请填写用户名' }, { min: 4, message: '不能小于4个字符' }]}]"}]})],1),r("a-form-item",{attrs:{label:"电子邮件"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,type:"email",message:"请输入邮箱地址"}],validateTrigger:["change","blur"]}],expression:"['email', {rules: [{ required: true, type: 'email', message: '请输入邮箱地址' }], validateTrigger: ['change', 'blur']}]"}]})],1),r("a-form-item",{attrs:{label:"手机号"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone"],expression:"['phone']"}]})],1),r("a-form-item",{attrs:{label:"登录密码"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请填写密码"},{min:6,message:"密码不能少于6个字符"}]}],expression:"['password', {rules:[{required: true, message: '请填写密码'}, { min: 6, message: '密码不能少于6个字符' }]}]"}],attrs:{type:"password"}})],1),r("a-form-item",{attrs:{label:"确认密码"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password2",{rules:[{required:!0,message:"请确认密码"},{min:6,message:"密码不能少于6个字符"}]}],expression:"['password2', {rules:[{required: true, message: '请确认密码'}, { min: 6, message: '密码不能少于6个字符' }]}]"}],attrs:{type:"password"}})],1),r("a-form-item",[r("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("提交")])],1)],1)],1)],1)],1)},o=[],n=(r("4160"),r("8ded")),i=r.n(n),s=r("9fb0"),c=r("88bc"),u=r.n(c),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-modal",{attrs:{title:"修改头像",visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading,width:800,footer:null},on:{cancel:e.cancelHandel}},[r("a-row",[r("a-col",{style:{height:"350px"},attrs:{xs:24,md:12}},[r("vue-cropper",{ref:"cropper",attrs:{img:e.options.img,info:!0,autoCrop:e.options.autoCrop,autoCropWidth:e.options.autoCropWidth,autoCropHeight:e.options.autoCropHeight,fixedBox:e.options.fixedBox},on:{realTime:e.realTime}})],1),r("a-col",{style:{height:"350px"},attrs:{xs:24,md:12}},[r("div",{staticClass:"avatar-upload-preview"},[r("img",{style:e.previews.img,attrs:{src:e.previews.url}})])])],1),r("br"),r("a-row",[r("a-col",{attrs:{lg:2,md:2}},[r("a-upload",{attrs:{name:"file",beforeUpload:e.beforeUpload,showUploadList:!1}},[r("a-button",{attrs:{icon:"upload"}},[e._v("选择图片")])],1)],1),r("a-col",{attrs:{lg:{span:1,offset:2},md:2}},[r("a-button",{attrs:{icon:"plus"},on:{click:function(t){return e.changeScale(1)}}})],1),r("a-col",{attrs:{lg:{span:1,offset:1},md:2}},[r("a-button",{attrs:{icon:"minus"},on:{click:function(t){return e.changeScale(-1)}}})],1),r("a-col",{attrs:{lg:{span:1,offset:1},md:2}},[r("a-button",{attrs:{icon:"undo"},on:{click:e.rotateLeft}})],1),r("a-col",{attrs:{lg:{span:1,offset:1},md:2}},[r("a-button",{attrs:{icon:"redo"},on:{click:e.rotateRight}})],1),r("a-col",{attrs:{lg:{span:2,offset:6},md:2}},[r("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.finish("blob")}}},[e._v("保存")])],1)],1)],1)},f=[],d=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),{data:function(){return{visible:!1,id:null,confirmLoading:!1,fileList:[],uploading:!1,options:{img:"",autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixedBox:!0},previews:{}}},methods:{edit:function(e){this.visible=!0,this.id=e},close:function(){this.id=null,this.visible=!1},cancelHandel:function(){this.close()},changeScale:function(e){e=e||1,this.$refs.cropper.changeScale(e)},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},beforeUpload:function(e){var t=this,r=new FileReader;return r.readAsDataURL(e),r.onload=function(){t.options.img=r.result},!1},finish:function(e){var t=this,r=this,a=new FormData;"blob"===e?this.$refs.cropper.getCropBlob((function(e){var o=window.URL.createObjectURL(e);t.model=!0,t.modelSrc=o,a.append("file",e,t.fileName),t.$http.post("https://www.mocky.io/v2/5cc8019d300000980a055e76",a,{contentType:!1,processData:!1,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){r.$message.success("上传成功"),r.$emit("ok",e.url),r.visible=!1}))})):this.$refs.cropper.getCropData((function(e){t.model=!0,t.modelSrc=e}))},okHandel:function(){var e=this;e.confirmLoading=!0,setTimeout((function(){e.confirmLoading=!1,e.close(),e.$message.success("上传头像成功")}),2e3)},realTime:function(e){this.previews=e}}}),p=d,m=(r("2d15"),r("2877")),h=Object(m["a"])(p,l,f,!1,null,"39df0c80",null),g=h.exports,v=r("a358"),b=(r("8111"),["uid","username","email","phone","passwrod","passwrod2"]),w={components:{AvatarModal:g},data:function(){return{token:null,preview:{},option:{img:"/avatar.jpg",info:!0,size:1,outputType:"jpeg",canScale:!1,autoCrop:!0,autoCropWidth:180,autoCropHeight:180,fixedBox:!0,fixed:!0,fixedNumber:[1,1]},userinfo:{},confirmLoading:!1,form:this.$form.createForm(this)}},created:function(){var e=this;b.forEach((function(t){return e.form.getFieldDecorator(t)})),this.$watch("userinfo",(function(){e.userinfo&&e.form.setFieldsValue(u()(e.userinfo,b))}))},mounted:function(){this.getToken(),this.getUserInfo()},methods:{getToken:function(){this.token=i.a.get(s["a"])},setavatar:function(e){this.option.img=e},getUserInfo:function(){var e=this;if(!this.token)return this.$notification.error({message:"Forbidden",description:"请登录"}),!1;var t={out_url:"userinfo",method:"POST",data:{}};Object(v["a"])(t).then((function(t){if(0!==t.code)return!1;e.userinfo=t.data})).catch((function(e){}))},handleSubmit:function(e){var t=this;if(e.preventDefault(),!this.token)return this.$message.error("请登录"),!1;this.form.validateFields((function(e,r){if(!e){if(r.password!==r.password2)return t.$message.error("请检查两次输入的密码"),!1;var a={out_url:"saveUser",method:"POST",data:{username:r.username,email:r.email,phone:r.phone,password:r.password}};Object(v["a"])(a).then((function(e){if(0!==e.code)return t.$message.error(e.message),!1;t.getUserInfo()})).catch((function(e){}))}}))}}},y=w,x=(r("eba7"),Object(m["a"])(y,a,o,!1,null,"546bbadf",null));t["default"]=x.exports},"0bf4":function(e,t,r){},"2d15":function(e,t,r){"use strict";var a=r("8502"),o=r.n(a);o.a},8502:function(e,t,r){},"88bc":function(e,t,r){(function(t){var r=1/0,a=9007199254740991,o="[object Arguments]",n="[object Function]",i="[object GeneratorFunction]",s="[object Symbol]",c="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,l=c||u||Function("return this")();function f(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function d(e,t){var r=-1,a=e?e.length:0,o=Array(a);while(++r<a)o[r]=t(e[r],r,e);return o}function p(e,t){var r=-1,a=t.length,o=e.length;while(++r<a)e[o+r]=t[r];return e}var m=Object.prototype,h=m.hasOwnProperty,g=m.toString,v=l.Symbol,b=m.propertyIsEnumerable,w=v?v.isConcatSpreadable:void 0,y=Math.max;function x(e,t,r,a,o){var n=-1,i=e.length;r||(r=$),o||(o=[]);while(++n<i){var s=e[n];t>0&&r(s)?t>1?x(s,t-1,r,a,o):p(o,s):a||(o[o.length]=s)}return o}function j(e,t){return e=Object(e),C(e,t,(function(t,r){return r in e}))}function C(e,t,r){var a=-1,o=t.length,n={};while(++a<o){var i=t[a],s=e[i];r(s,i)&&(n[i]=s)}return n}function k(e,t){return t=y(void 0===t?e.length-1:t,0),function(){var r=arguments,a=-1,o=y(r.length-t,0),n=Array(o);while(++a<o)n[a]=r[t+a];a=-1;var i=Array(t+1);while(++a<t)i[a]=r[a];return i[t]=n,f(e,this,i)}}function $(e){return O(e)||L(e)||!!(w&&e&&e[w])}function S(e){if("string"==typeof e||N(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}function L(e){return U(e)&&h.call(e,"callee")&&(!b.call(e,"callee")||g.call(e)==o)}var O=Array.isArray;function T(e){return null!=e&&_(e.length)&&!F(e)}function U(e){return A(e)&&T(e)}function F(e){var t=q(e)?g.call(e):"";return t==n||t==i}function _(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function q(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function A(e){return!!e&&"object"==typeof e}function N(e){return"symbol"==typeof e||A(e)&&g.call(e)==s}var H=k((function(e,t){return null==e?{}:j(e,d(x(t,1),S))}));e.exports=H}).call(this,r("c8ba"))},eba7:function(e,t,r){"use strict";var a=r("0bf4"),o=r.n(a);o.a}}]);