(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-495ba0d2"],{"102d":function(e,t,a){"use strict";var r=a("7622"),n=a.n(r);n.a},7622:function(e,t,a){},"88bc":function(e,t,a){(function(t){var a=1/0,r=9007199254740991,n="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",l="[object Symbol]",s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,d=s||c||Function("return this")();function u(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function f(e,t){var a=-1,r=e?e.length:0,n=Array(r);while(++a<r)n[a]=t(e[a],a,e);return n}function m(e,t){var a=-1,r=t.length,n=e.length;while(++a<r)e[n+a]=t[a];return e}var p=Object.prototype,h=p.hasOwnProperty,v=p.toString,g=d.Symbol,b=p.propertyIsEnumerable,y=g?g.isConcatSpreadable:void 0,_=Math.max;function w(e,t,a,r,n){var i=-1,o=e.length;a||(a=L),n||(n=[]);while(++i<o){var l=e[i];t>0&&a(l)?t>1?w(l,t-1,a,r,n):m(n,l):r||(n[n.length]=l)}return n}function k(e,t){return e=Object(e),x(e,t,(function(t,a){return a in e}))}function x(e,t,a){var r=-1,n=t.length,i={};while(++r<n){var o=t[r],l=e[o];a(l,o)&&(i[o]=l)}return i}function S(e,t){return t=_(void 0===t?e.length-1:t,0),function(){var a=arguments,r=-1,n=_(a.length-t,0),i=Array(n);while(++r<n)i[r]=a[t+r];r=-1;var o=Array(t+1);while(++r<t)o[r]=a[r];return o[t]=i,u(e,this,o)}}function L(e){return O(e)||j(e)||!!(y&&e&&e[y])}function F(e){if("string"==typeof e||I(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function j(e){return $(e)&&h.call(e,"callee")&&(!b.call(e,"callee")||v.call(e)==n)}var O=Array.isArray;function C(e){return null!=e&&A(e.length)&&!q(e)}function $(e){return T(e)&&C(e)}function q(e){var t=M(e)?v.call(e):"";return t==i||t==o}function A(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function M(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function T(e){return!!e&&"object"==typeof e}function I(e){return"symbol"==typeof e||T(e)&&v.call(e)==l}var V=S((function(e,t){return null==e?{}:k(e,f(w(t,1),F))}));e.exports=V}).call(this,a("c8ba"))},"900f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("standard-form-row",{staticStyle:{"padding-bottom":"11px"},attrs:{title:"",block:""}},[e.token?e._e():a("router-link",{attrs:{to:{name:"login"}}},[a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"default",icon:"login"}},[e._v(" 登录 ")])],1),a("a-radio-group",{on:{change:function(t){return e.handleChangeType(e.module)}},model:{value:e.module,callback:function(t){e.module=t},expression:"module"}},[a("a-radio-button",{attrs:{value:"recommend"}},[e._v("推荐")]),a("a-radio-button",{attrs:{value:"new"}},[e._v("最新")]),a("a-radio-button",{attrs:{value:"collection"}},[e._v("收藏最多")])],1),a("a-input-search",{staticStyle:{"margin-left":"16px",width:"272px"},on:{search:e.handleSearch}})],1),a("a-card",{staticStyle:{width:"100%"},attrs:{bordered:!1}},[a("div",{staticClass:"operate"},[a("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus"},on:{click:e.handleAdd}},[e._v("发布")])],1),a("a-list",{attrs:{size:"large",rowKey:"id",loading:e.loading,itemLayout:"vertical",dataSource:e.feedList},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{key:t.id},[a("template",{slot:"actions"},[a("a",{on:{click:function(a){return e.handleCollection(t)}}},[a("icon-text",{attrs:{type:"star-o",text:t.col_times}})],1),a("a",{on:{click:function(a){return e.handleLike(t)}}},[a("icon-text",{attrs:{type:"like-o",text:t.like}})],1)]),a("a-list-item-meta",[a("a",{attrs:{slot:"title"},slot:"title"},[a("strong",[e._v(e._s(t.title))])]),a("template",{slot:"description"},[t.url?a("span",[a("a",{attrs:{href:t.url,target:"_blank"}},[a("a-tag",[e._v(e._s(t.url))])],1)]):e._e()])],2),t.pic?a("img",{attrs:{slot:"extra",width:"272",alt:"pic",src:t.pic},slot:"extra"}):e._e(),a("feed-list",{attrs:{description:t.content,owner:t.username,avatar:t.avatar,href:t.link,updateAt:t.created_at}})],2)}}])},[a("span"),e.pageInfo.next_page_url?a("div",{staticStyle:{"text-align":"center","margin-top":"1px"},attrs:{slot:"footer"},slot:"footer"},[a("a-button",{attrs:{loading:e.loadingMore},on:{click:e.loadMore}},[e._v("加载更多")])],1):e._e()]),a("web-form",{ref:"webSaveModal",attrs:{visible:e.visible,loading:e.confirmLoading,model:e.mdl},on:{cancel:e.handleCancel,ok:e.handleOk}}),a("feed-add-form",{ref:"feedAddModal",attrs:{visible:e.addFeedVisible,loading:e.feedConfirmLoading,model:e.mdl2},on:{cancel:e.handleCancelFeed,ok:e.handleOkFeed}})],1)],1)},n=[],i=(a("99af"),a("b0c0"),a("9911"),a("8ded")),o=a.n(i),l=a("9fb0"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"antd-pro-components-article-list-content-index-listContent"},[a("div",{staticClass:"description"},[e._t("default",[e._v(" "+e._s(e.description)+" ")])],2),a("div",{staticClass:"extra"},[a("a-avatar",{attrs:{src:e.avatar,size:"small"}}),a("a",{staticStyle:{color:"#000"},attrs:{href:e.href}},[e._v(e._s(e.owner))]),e.href?a("span",{staticStyle:{"margin-left":"10px"}},[a("a",{attrs:{href:e.href,target:"_blank"}},[e._v("查看全文")])]):e._e(),a("em",[e._v(e._s(e._f("moment")(e.updateAt)))])],1)])},c=[],d={name:"FeedList",props:{prefixCls:{type:String,default:"antd-pro-components-article-list-content-index-listContent"},description:{type:String,default:""},owner:{type:String,required:!0},avatar:{type:String,required:!0},href:{type:String,required:!0},updateAt:{type:String,required:!0}}},u=d,f=(a("102d"),a("2877")),m=Object(f["a"])(u,s,c,!1,null,"d0099c4a",null),p=m.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:e.type}}),e._v(" "+e._s(e.text)+" ")],1)},v=[],g=(a("a9e3"),{name:"IconText",props:{type:{type:String,required:!0},text:{type:[String,Number],required:!0}}}),b=g,y=Object(f["a"])(b,h,v,!1,null,null,null),_=y.exports,w=a("a358"),k=a("f6db"),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"添加",width:640,visible:e.visible,confirmLoading:e.loading},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-form",e._b({attrs:{form:e.form}},"a-form",e.formLayout,!1),[a("a-form-item",{attrs:{label:"标题"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请填写标题"}]}],expression:"['title', {rules:[{required: true, message: '请填写标题'}]}]"}]})],1),a("a-form-item",{attrs:{label:"链接地址"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{rules:[{required:!0,message:"请填写url链接地址"}]}],expression:"['url', {rules:[{required: true, message: '请填写url链接地址'}]}]"}],attrs:{placeholder:"如：https://wwwbaidu.com/"}})],1),a("a-form-item",{attrs:{label:"内容"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"请填写内容"}]}],expression:"['content', {rules:[{required: true, message: '请填写内容'}]}]"}],attrs:{placeholder:"","auto-size":{minRows:3,maxRows:5}}})],1),a("a-form-item",{attrs:{label:"图片地址"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pic",{rules:[{required:!1,message:""}]}],expression:"['pic', {rules:[{required: false, message: ''}]}]"}],attrs:{placeholder:"如：http://wx3.sinaimg.cn/large/005WJhQlly1gj5cfxj8r6j30f409cq45.jpg"}})],1),a("a-form-item",{attrs:{label:"原文链接"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["link",{rules:[{required:!1,message:"请正确填写地址"}]}],expression:"['link', {rules:[{required: false, message: '请正确填写地址'}]}]"}],attrs:{placeholder:""}})],1)],1)],1)],1)},S=[],L=(a("4160"),a("88bc")),F=a.n(L),j=["title","content","url","link","pic"],O={props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){return null}}},data:function(){return this.formLayout={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}}},{form:this.$form.createForm(this)}},created:function(){var e=this;j.forEach((function(t){return e.form.getFieldDecorator(t)})),this.$watch("model",(function(){e.model&&e.form.setFieldsValue(F()(e.model,j))}))}},C=O,$=Object(f["a"])(C,x,S,!1,null,null,null),q=$.exports,A=a("2af9"),M={name:"Feed",components:{FeedList:p,StandardFormRow:A["b"],WebForm:k["a"],FeedAddForm:q,IconText:_},data:function(){return{loading:!0,loadingMore:!1,feedList:[],pageInfo:{},data:[],module:"recommend",token:null,page:1,desc:"",clickColTimes:[],clickLikeTimes:[],visible:!1,addFeedVisible:!1,confirmLoading:!1,feedConfirmLoading:!1,mdl:null,mdl2:null}},mounted:function(){this.getFeedList(),this.getToken()},methods:{handleSearch:function(e){this.page=1,this.desc=e,this.feedList=[],this.getFeedList()},handleChangeType:function(e){this.module=e,this.page=1,this.desc="",this.feedList=[],this.getFeedList()},handleAdd:function(){if(!this.token)return this.$message.error("请登录"),!1;this.addFeedVisible=!0,this.mdl2={title:"",type:0,content:"",url:"",link:"",pic:""}},getToken:function(){this.token=o.a.get(l["a"])},handleCollection:function(e){var t=this;if(!this.token)return this.$message.error("请登录"),!1;this.loading=!0;var a={out_url:"saveMySite",method:"POST",data:{fid:e.fid,name:e.title,url:e.url}};Object(w["a"])(a).then((function(a){if(0!==a.code)return t.$message.info("添加失败"),!1;t.loading=!1,e.col_times+=1})).catch((function(e){t.$message.info("网络异常")}))},handleLike:function(e){if(!this.token)return this.$message.error("请登录"),!1;this.dataIncr(e,"like")},dataIncr:function(e,t){var a={out_url:"dataIncr",method:"POST",data:{fid:e.fid,type:t}};Object(w["a"])(a).then((function(t){if(0!==t.code)return!1;e.like+=1})).catch((function(e){}))},getFeedList:function(){var e=this;this.loading=!0;var t={out_url:"feedList",method:"POST",data:{module:this.module,desc:this.desc,page:this.page}};Object(w["a"])(t).then((function(t){if(e.loading=!1,e.loadingMore=!1,0!==t.code)return!1;e.pageInfo=t.data,e.feedList=e.feedList.concat(e.pageInfo.data)})).catch((function(e){}))},loadMore:function(){this.loadingMore=!0,this.page+=1,this.getFeedList()},handleCancel:function(){this.visible=!1,this.confirmLoading=!1;this.$refs.webSaveModal.form},handleCancelFeed:function(){this.addFeedVisible=!1,this.feedConfirmLoading=!1;this.$refs.feedAddModal.form},handleOk:function(){var e=this,t=this.$refs.webSaveModal.form;this.confirmLoading=!0,t.validateFields((function(t,a){if(t)e.confirmLoading=!1;else{var r={out_url:"saveMySite",method:"POST",data:{fid:a.id,type:a.type,name:a.name,url:a.url,sort:0}};Object(w["a"])(r).then((function(t){e.confirmLoading=!1,0===t.code?e.visible=!1:e.$message.info("添加失败")})).catch((function(e){}))}}))},handleOkFeed:function(){var e=this,t=this.$refs.feedAddModal.form;this.feedConfirmLoading=!0,t.validateFields((function(t,a){if(t)e.feedConfirmLoading=!1;else{var r={out_url:"feedSend",method:"POST",data:{title:a.title,link:a.link,url:a.url,content:a.content,pic:a.pic}};Object(w["a"])(r).then((function(t){e.feedConfirmLoading=!1,0===t.code?(e.addFeedVisible=!1,e.$message.info("正在审核中...")):e.$message.error("添加失败")})).catch((function(e){}))}}))}}},T=M,I=Object(f["a"])(T,r,n,!1,null,"83fab0b8",null);t["default"]=I.exports},f6db:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"添加",width:640,visible:e.visible,confirmLoading:e.loading},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-form",e._b({attrs:{form:e.form}},"a-form",e.formLayout,!1),[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{initialValue:0}],expression:"['id', { initialValue: 0 }]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{attrs:{label:"类型"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:1}],expression:"['type', {initialValue:1}]"}]},[a("a-select-option",{attrs:{value:1}},[e._v("常用")]),a("a-select-option",{attrs:{value:2}},[e._v("专业")]),a("a-select-option",{attrs:{value:3}},[e._v("娱乐")]),a("a-select-option",{attrs:{value:4}},[e._v("游戏")]),a("a-select-option",{attrs:{value:5}},[e._v("阅读")]),a("a-select-option",{attrs:{value:6}},[e._v("旅行")]),a("a-select-option",{attrs:{value:7}},[e._v("交友")]),a("a-select-option",{attrs:{value:8}},[e._v("其它")])],1)],1),a("a-form-item",{attrs:{label:"名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请填写名称"}]}],expression:"['name', {rules:[{required: true, message: '请填写名称'}]}]"}]})],1),a("a-form-item",{attrs:{label:"地址"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{rules:[{required:!0,message:"请正确填写地址"}]}],expression:"['url', {rules:[{required: true, message: '请正确填写地址'}]}]"}],attrs:{placeholder:"如：http://wwwbaidu.com/"}})],1)],1)],1)],1)},n=[],i=(a("4160"),a("88bc")),o=a.n(i),l=["id","type","name","url"],s={props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){return null}}},data:function(){return this.formLayout={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}}},{form:this.$form.createForm(this)}},created:function(){var e=this;l.forEach((function(t){return e.form.getFieldDecorator(t)})),this.$watch("model",(function(){e.model&&e.form.setFieldsValue(o()(e.model,l))}))}},c=s,d=a("2877"),u=Object(d["a"])(c,r,n,!1,null,null,null);t["a"]=u.exports}}]);